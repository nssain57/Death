<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chicken Run Game</title>

<style>
    body{
        margin:0;
        overflow:hidden;
        background:#f7f7f7;
        font-family:Arial, sans-serif;
        display:flex;
        justify-content:center;
        align-items:center;
        height:100vh;
    }

    canvas{
        background:#ffffff;
        border:2px solid #222;
        display:block;
    }

    #startScreen{
        position:absolute;
        text-align:center;
        font-size:22px;
        color:#333;
        cursor:pointer;
    }
</style>
</head>
<body>

<div id="startScreen">Tap / Click To Start</div>
<canvas id="gameCanvas" width="900" height="300"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const startScreen = document.getElementById("startScreen");

let gameStarted = false;
let gravity = 0.6;
let speed = 6;
let score = 0;
let frame = 0;
let nightMode = false;

const chicken = {
    x: 80,
    y: 0,
    width: 40,
    height: 40,
    dy: 0,
    jumpForce: 12,
    grounded: false
};

let obstacles = [];
let birds = [];

function resetGame(){
    obstacles = [];
    birds = [];
    score = 0;
    speed = 6;
    frame = 0;
    nightMode = false;
    chicken.y = groundY() - chicken.height;
}

function groundY(){
    return canvas.height - 40;
}

function drawGround(){
    ctx.fillStyle = nightMode ? "#888" : "#444";
    ctx.fillRect(0, groundY(), canvas.width, 3);
}

function drawChicken(){
    ctx.fillStyle = nightMode ? "#ffcc00" : "#ff9900";
    ctx.fillRect(chicken.x, chicken.y, chicken.width, chicken.height);
}

function drawObstacles(){
    ctx.fillStyle = nightMode ? "#aaa" : "#555";
    obstacles.forEach(obs=>{
        ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
    });
}

function drawBirds(){
    ctx.fillStyle = nightMode ? "#ddd" : "#222";
    birds.forEach(b=>{
        ctx.fillRect(b.x, b.y, b.width, b.height);
    });
}

function update(){
    if(!gameStarted) return;

    frame++;
    score++;

    if(score % 500 === 0){
        speed += 0.5;
    }

    if(score > 2000){
        nightMode = true;
        document.body.style.background = "#111";
        canvas.style.background = "#222";
    }

    chicken.dy += gravity;
    chicken.y += chicken.dy;

    if(chicken.y + chicken.height >= groundY()){
        chicken.y = groundY() - chicken.height;
        chicken.dy = 0;
        chicken.grounded = true;
    }

    if(frame % 90 === 0){
        obstacles.push({
            x: canvas.width,
            y: groundY() - 30,
            width: 20,
            height: 30
        });
    }

    if(score > 1500 && frame % 150 === 0){
        birds.push({
            x: canvas.width,
            y: groundY() - 80,
            width: 30,
            height: 20
        });
    }

    obstacles.forEach(obs=> obs.x -= speed);
    birds.forEach(b=> b.x -= speed);

    obstacles = obstacles.filter(obs=> obs.x + obs.width > 0);
    birds = birds.filter(b=> b.x + b.width > 0);

    checkCollision();
}

function checkCollision(){
    obstacles.forEach(obs=>{
        if(
            chicken.x < obs.x + obs.width &&
            chicken.x + chicken.width > obs.x &&
            chicken.y < obs.y + obs.height &&
            chicken.y + chicken.height > obs.y
        ){
            gameOver();
        }
    });

    birds.forEach(b=>{
        if(
            chicken.x < b.x + b.width &&
            chicken.x + chicken.width > b.x &&
            chicken.y < b.y + b.height &&
            chicken.y + chicken.height > b.y
        ){
            gameOver();
        }
    });
}

function gameOver(){
    gameStarted = false;
    startScreen.innerText = "Game Over! Tap To Restart";
    startScreen.style.display = "block";
}

function drawScore(){
    ctx.fillStyle = nightMode ? "#fff" : "#000";
    ctx.font = "20px Arial";
    ctx.fillText("Score: " + score, canvas.width - 150, 30);
}

function gameLoop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    update();
    drawGround();
    drawChicken();
    drawObstacles();
    drawBirds();
    drawScore();

    requestAnimationFrame(gameLoop);
}

window.addEventListener("keydown", e=>{
    if(e.code === "Space" && chicken.grounded){
        chicken.dy = -chicken.jumpForce;
        chicken.grounded = false;
    }
});

canvas.addEventListener("click", ()=>{
    if(!gameStarted){
        resetGame();
        gameStarted = true;
        startScreen.style.display = "none";
    }else if(chicken.grounded){
        chicken.dy = -chicken.jumpForce;
        chicken.grounded = false;
    }
});

canvas.addEventListener("touchstart", ()=>{
    if(!gameStarted){
        resetGame();
        gameStarted = true;
        startScreen.style.display = "none";
    }else if(chicken.grounded){
        chicken.dy = -chicken.jumpForce;
        chicken.grounded = false;
    }
});

resetGame();
gameLoop();
</script>

</body>
</html>

