<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dino Game</title>
<style>
body{
  margin:0;
  overflow:hidden;
  background:#111;
}

#game{
  width:100%;
  height:200px;
  background:#222;
  position:relative;
  border-bottom:4px solid white;
}

#dino{
  width:40px;
  height:40px;
  background:lime;
  position:absolute;
  bottom:0;
  left:50px;
  border-radius:8px;
}

#cactus{
  width:25px;
  height:50px;
  background:red;
  position:absolute;
  bottom:0;
  right:-50px;
}

#score{
  color:white;
  position:absolute;
  top:10px;
  right:20px;
  font-size:18px;
}
</style>
</head>
<body>

<div id="game">
  <div id="dino"></div>
  <div id="cactus"></div>
  <div id="score">0</div>
</div>

<script>
let dino = document.getElementById("dino");
let cactus = document.getElementById("cactus");
let scoreText = document.getElementById("score");

let isJumping = false;
let score = 0;
let gameOver = false;

// Jump
function jump(){
  if(isJumping || gameOver) return;
  isJumping = true;
  let up = 0;

  let jumpUp = setInterval(()=>{
    if(up >= 100){
      clearInterval(jumpUp);

      let down = setInterval(()=>{
        if(up <= 0){
          clearInterval(down);
          isJumping = false;
        }
        up -= 5;
        dino.style.bottom = up + "px";
      },20);

    }
    up += 5;
    dino.style.bottom = up + "px";
  },20);
}

// Obstacle Move
function moveCactus(){
  let pos = window.innerWidth;
  cactus.style.right = "-50px";

  let move = setInterval(()=>{
    if(gameOver){
      clearInterval(move);
      return;
    }

    pos -= 5;
    cactus.style.right = (window.innerWidth - pos) + "px";

    let dinoBottom = parseInt(window.getComputedStyle(dino).bottom);
    let cactusLeft = cactus.getBoundingClientRect().left;
    let dinoLeft = dino.getBoundingClientRect().left;

    if(cactusLeft < dinoLeft + 40 && cactusLeft > dinoLeft && dinoBottom < 40){
      gameOver = true;
      alert("Game Over! Score: " + score);
      location.reload();
    }

    if(pos <= -50){
      score++;
      scoreText.innerText = score;
      pos = window.innerWidth;
    }

  },20);
}

moveCactus();

document.addEventListener("keydown",(e)=>{
  if(e.code === "Space"){
    jump();
  }
});

document.addEventListener("touchstart",()=>{
  jump();
});
</script>

</body>
</html>
