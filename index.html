<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Runner Game</title>

<style>
body{
  margin:0;
  overflow:hidden;
  background:#f7f7f7;
  font-family:Arial;
}

canvas{
  display:block;
}

#scoreBoard{
  position:absolute;
  top:20px;
  right:20px;
  font-size:18px;
}

#startScreen, #gameOverScreen{
  position:absolute;
  width:100%;
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  background:rgba(0,0,0,0.6);
  color:white;
  font-size:24px;
}

button{
  padding:10px 20px;
  font-size:18px;
  margin-top:15px;
  cursor:pointer;
}
</style>
</head>
<body>

<canvas id="game"></canvas>
<div id="scoreBoard">Score: 0 | High: 0</div>

<div id="startScreen">
  Click To Start
</div>

<div id="gameOverScreen" style="display:none;">
  <div id="finalScore"></div>
  <button onclick="restartGame()">Restart</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scoreBoard = document.getElementById("scoreBoard");
const startScreen = document.getElementById("startScreen");
const gameOverScreen = document.getElementById("gameOverScreen");
const finalScore = document.getElementById("finalScore");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let gravity = 0.8;
let gameSpeed = 6;
let score = 0;
let highScore = localStorage.getItem("highScore") || 0;
let obstacles = [];
let frame = 0;
let gameRunning = false;

class Player{
  constructor(){
    this.width = 40;
    this.height = 40;
    this.x = 80;
    this.y = canvas.height - this.height - 50;
    this.dy = 0;
    this.jumpForce = 15;
    this.grounded = true;
  }

  draw(){
    ctx.fillStyle = "#000";
    ctx.fillRect(this.x,this.y,this.width,this.height);
  }

  update(){
    this.y += this.dy;

    if(this.y + this.height < canvas.height - 50){
      this.dy += gravity;
      this.grounded = false;
    } else {
      this.dy = 0;
      this.grounded = true;
      this.y = canvas.height - this.height - 50;
    }
    this.draw();
  }

  jump(){
    if(this.grounded){
      this.dy = -this.jumpForce;
    }
  }
}

class Obstacle{
  constructor(){
    this.width = 20 + Math.random()*20;
    this.height = 40;
    this.x = canvas.width;
    this.y = canvas.height - this.height - 50;
  }

  draw(){
    ctx.fillStyle = "#222";
    ctx.fillRect(this.x,this.y,this.width,this.height);
  }

  update(){
    this.x -= gameSpeed;
    this.draw();
  }
}

let player = new Player();

function spawnObstacle(){
  obstacles.push(new Obstacle());
}

function detectCollision(a,b){
  return a.x < b.x + b.width &&
         a.x + a.width > b.x &&
         a.y < b.y + b.height &&
         a.y + a.height > b.y;
}

function gameLoop(){
  if(!gameRunning) return;

  ctx.clearRect(0,0,canvas.width,canvas.height);
  frame++;

  if(frame % 90 === 0){
    spawnObstacle();
  }

  obstacles.forEach((obs,i)=>{
    obs.update();

    if(detectCollision(player,obs)){
      endGame();
    }

    if(obs.x < -50){
      obstacles.splice(i,1);
      score++;
      if(score % 10 === 0){
        gameSpeed += 0.5;
      }
    }
  });

  player.update();

  scoreBoard.innerText = "Score: "+score+" | High: "+highScore;

  if(score > highScore){
    highScore = score;
    localStorage.setItem("highScore",highScore);
  }

  requestAnimationFrame(gameLoop);
}

function startGame(){
  startScreen.style.display = "none";
  gameRunning = true;
  gameLoop();
}

function endGame(){
  gameRunning = false;
  finalScore.innerText = "Game Over! Score: " + score;
  gameOverScreen.style.display = "flex";
}

function restartGame(){
  obstacles = [];
  score = 0;
  gameSpeed = 6;
  frame = 0;
  gameOverScreen.style.display = "none";
  gameRunning = true;
  gameLoop();
}

document.addEventListener("keydown", ()=> player.jump());
document.addEventListener("click", ()=>{
  if(!gameRunning){
    startGame();
  } else {
    player.jump();
  }
});
document.addEventListener("touchstart", ()=>{
  if(!gameRunning){
    startGame();
  } else {
    player.jump();
  }
});
</script>

</body>
</html>
